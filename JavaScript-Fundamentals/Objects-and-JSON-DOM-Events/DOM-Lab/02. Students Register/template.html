<html lang="en">

<head>
    <link rel="stylesheet" href="./style/template.css">
    <title>Students Register</title>
</head>

<body>
<div id="container">
    <nav id="navigation">
        <div id="navigation-text">
            <p id="lecture-name">Objects, JSON and DOM Events</p>
            <p id="problem-name">02. Students Register</p>
        </div>
        <img id="logo-img" src="./images/SoftUniFoundation_Logo_OneLine_White@2x.png" alt="logo">
    </nav>
    <main>
        <div id="exercise">
            <form>
                <label>Students</label>
                <textarea type="text" id="input" rows="10" cols="50"></textarea>
                <div class="center">
                    <input type="submit" id="button" onclick="addStudents()" value="Add Students">
                </div>
            </form>
            <label>Result</label>
            <textarea readonly rows="10" cols="50" id="result"></textarea>
        </div>
        <img id="softUni-person-img" src="./images/cw_2_New_Logo.png" alt="softUni-person">
    </main>
    <footer>
        <p id="footer-text">Check your solution here: <span id="check-judge">Link to judge</span>
        </p>
    </footer>
</div>
<script>
    document.getElementById("button").addEventListener("click", function (event) {
        event.preventDefault()
    });

    function addStudents() {
        let studentsInput = document.getElementById('input').value.split('\n');
        let resultElement = document.getElementById('result');

        let students = studentsInput
            .filter(x => x !== '')
            .map(currentStudent => {
                let [firstName, lastName, grade] = currentStudent.split(' ');

                return {
                    'firstName': firstName,
                    'lastName': lastName,
                    'grade': Number(grade)
                }
            });

        let allStudentsName = students
            .map(s => `${s.firstName} ${s.lastName}`)
            .join(' ');

        let allStudentsAverageGrade = students
                .map(s => s.grade)
                .reduce((a, b) => a + b, 0)
            / students.length;

        resultElement.textContent = `Students are: ${allStudentsName}${'\n'}Average grade: ${allStudentsAverageGrade.toFixed(2)}`;
    }
</script>
</body>

</html>